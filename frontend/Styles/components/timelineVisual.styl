// Timeline Visual Component
// 可重複使用的 Timeline 視覺化組件樣式（包含 Desktop 和 Mobile）

// Desktop Styles
// 需要嵌套在 .results-panel .timeline-content 下以確保正確應用
.results-panel .timeline-content .timeline-visual
  position relative
  padding 20px
  margin 0
  width 100%
  
  &.timeline-visual--order-final
    .timeline-connector
      &::after
        background prColor
    .timeline-track
      &::after
        background prColor

  // Timeline Track (桌面版隱藏)
  .timeline-track
    display none
  
  // Timeline Connector (桌面版連接線)
  .timeline-connector
    position absolute
    left 0
    right 0
    width 88%
    top 0
    height 100%
    z-index 0
    margin 0 auto
    
    &::before
      content ''
      position absolute
      left 0
      top 39%
      transform translateY(-50%)
      width 100%
      height 4px
      background linear-gradient(to right, neutral-light 70%)
      z-index 1
    
    &::after
      content ''
      position absolute
      left 0
      top 39%
      transform translateY(-50%)
      width var(--timeline-progress-width, 0%)
      height 4px
      background linear-gradient(90deg, #143463 70%, #bb2749 100%)
      border-radius 25px
      z-index 2
  
  // Timeline Events Container
  .timeline-events
    position absolute
    top 0
    left 0
    width 100%
    height 100%
  
  // Timeline Nodes Container (保留此處的引用，實際樣式在 resultsPanel.styl)
  // .timeline-nodes-container 的樣式定義在 resultsPanel.styl 中

.timeline-preview--domestic-completed
  .timeline-nodes-container
    .timeline-node
      pointer-events none
      .node-date
        .month,
        .day
          color primary-color
          font-style normal
          margin-top 0
      .node-circle
        background primary-color
        border 2px solid base-white
        border-radius 50%
        width 40px
        height 40px
        transition none
        &::before
          background base-white
        &::after
          width 10px
          height 10px
          background-image url('../images/icon-check.svg')
          background-size contain
          background-repeat no-repeat
          background-position center
          filter brightness(0) invert(1)
          animation none
      .node-info
        .node-status
          color primary-color
          position static
          &::before
            display none
        .node-time
          color neutral-gray
    .timeline-node:nth-child(2),
    .timeline-node:nth-child(3),
    .timeline-node:nth-child(4)
      .node-circle
        border-style solid
        &::after
          background-image url('../images/icon-check.svg')
          filter brightness(0) invert(1)
  .timeline-connector
    &::after
      background prColor

// Mobile Styles
// 注意：Mobile 樣式需要嵌套在 .results-panel .timeline-content 下
// 以確保與 timeline-nodes-container 的移動版樣式正確配合
@media (max-width: 768px)
  .results-panel .timeline-content
    .summary-title
      font-size 1.5rem
      font-weight 600
      color prColor

    .timeline-visual
      padding 15px 0
      position relative
      width 100%
      
      // Timeline Track (移動版顯示)
      .timeline-track
        display block
        position absolute
        top 0
        left 50%
        transform translateX(-50%)
        width 100%
        height 100%
        pointer-events none
        
        &::before
          content ''
          position absolute
          left 21.3%
          top 6%
          width 8px
          height 87%
          background linear-gradient(to bottom, neutral-light 60%)
          z-index 0
          border-radius 15px
        
        &::after
          content ''
          position absolute
          left 21.3%
          top 6%
          width 8px
          height var(--timeline-progress-height, 0%)
          max-height 88%
          background linear-gradient(to bottom, #143463 70%, #bb2749 100%)
          border-radius 15px
          z-index 1
      
      &.timeline-visual--order-final
        .timeline-track
          &::after
            background prColor

      .timeline-connector
        display none

.timeline-preview
  .timeline-visual.timeline-visual--order-final
    .timeline-track
      &::after
        background prColor

@media (max-width: 768px)
  .timeline-preview
    .timeline-visual
      .timeline-connector
        display none

